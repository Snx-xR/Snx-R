env:
    CIRRUS_CLONE_DEPTH: 1
    rom_name: Nusantara
    device: lavender
    TELEGRAM_ID: $tg_id
    BOT_API: $bot_api

task:
  name: "Snx-R"
  # skip: $CIRRUS_BRANCH == 'main'
  timeout_in: 240m
  container:
      image: snaxpsycho/crave:ubuntu
      # image: snaxpsycho/cirrus:latest
      cpu: 8
      memory: 32G
      stateful: true
      greedy: true
      volumes:
          - /home/cirrus:/home/cirrus
          - /home/cirrus/ccache:/home/cirrus/ccache
          - /home/cirrus/.config:/home/cirrus/.config
          
  compiling_script:
    - sudo apt install jq curl -y
    - mkdir Nusantara && cd Nusantara
    - echo "https://Sa-Sajjad:$ght@github.com" > ~/.git-credentials; git config --global credential.helper "store --file ~/.git-credentials"
    - repo init --depth=1 --no-repo-verify -u https://Snax-phycho:$ght@github.com/Nusantara-SiXtY-N9/android_manifest_nusa.git -b 10
    - git clone https://github.com/Sa-Sajjad/manifest.git --depth 1 -b ten-ksu .repo/local_manifests
    - repo sync -j$(nproc --all) --no-clone-bundle --no-tags --optimized-fetch --prune
