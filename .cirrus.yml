env:
    CIRRUS_CLONE_DEPTH: 1
    rom_name: mtx
    device: lavender

task:
  name: "Snx-R"
  # skip: $CIRRUS_BRANCH == 'main'
  timeout_in: 240m
  container:
      image: snaxpsycho/cirrus:beta
      cpu: 8
      memory: 32G
      stateful: true
      greedy: true
      volumes:
          - /home/cirrus:/home/cirrus
          - /home/cirrus/ccache:/home/cirrus/ccache
          - /home/cirrus/.config:/home/cirrus/.config
          
  free_script:
    - df -h .
    - free -h

  build_script:
    - mkdir Snx && cd Snx
    - bash $CIRRUS_WORKING_DIR/config.sh
    